import i from'../../../lib/db';import {organization,organizer,user}from'../../../lib/db/schema';import {eq}from'drizzle-orm';async function z(t){const r=await i.insert(organization).values({name:"My Organization"}).returning();if(!r[0])throw new Error("Failed to create organization");const e=await i.insert(organizer).values({organizationId:r[0].id,userId:t,level:"owner"}).returning();if(!e[0])throw new Error("Failed to create organizer");if(!await i.update(user).set({selectedOrganizerId:e[0].id}).where(eq(user.id,t)))throw new Error("Failed to update user");return {...e[0],organization:r[0]}}export{z as createOrganizer};//# sourceMappingURL=create-organizer.js.map
//# sourceMappingURL=create-organizer.js.map