import t from'../../../lib/db';import {question}from'../../../lib/db/schema/question';import {eq,sql,and,ne,gte}from'drizzle-orm';async function l(r){const n=(await t.query.question.findFirst({columns:{order:true},where(d,s){return s.eq(d.id,r)}}))?.order,o=await t.update(question).set({deletedAt:new Date().toISOString()}).where(eq(question.id,r)).returning();o[0]&&n&&await t.update(question).set({order:sql`${question.order} - 1`}).where(and(eq(question.referenceId,o[0].referenceId),ne(question.id,r),gte(question.order,n)));}export{l as deleteQuestion};//# sourceMappingURL=delete-question.js.map
//# sourceMappingURL=delete-question.js.map