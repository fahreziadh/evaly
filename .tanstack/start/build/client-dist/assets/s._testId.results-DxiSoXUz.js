import{U as k,i as S,h as R,g as D,r as L,j as e,c as M,C as l,B as v,V as b}from"./main-DlyImwyW.js";import{P as w}from"./progress-BB8jOzAC.js";import{U as O}from"./user-D9P9ZxEN.js";import{F as $}from"./file-text-BOTRp_Gg.js";import{C as m}from"./calendar-Bcye-9vl.js";import{C as y}from"./check-Co2yzWpo.js";import{X as C}from"./x-DetwzAZJ.js";import{C as A}from"./clock-CcSH04sM.js";import"./index-D8u25tJ8.js";import"./index-D1zo_IBC.js";function Y(){var o,h,j,p,N,u,f,g;const{testId:c}=k.useParams(),x=S(),r=R(D.participant.testResult.getMyResults,{testId:c}),[n,I]=L.useState(null);if(r===void 0)return e.jsx(M,{});if(!r)return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsx(l,{className:"max-w-md p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"No Results Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"You haven't completed this test yet or results are not available."}),e.jsxs(v,{onClick:()=>x({to:"/s/$testId",params:{testId:c}}),children:[e.jsx(b,{className:"mr-2 h-4 w-4"}),"Back to Test"]})]})})});const i=t=>{const s=Math.floor(t/6e4),d=Math.floor(t%6e4/1e3);return`${s}m ${d}s`},T=r.sections.reduce((t,s)=>t+s.duration,0);return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs(v,{variant:"ghost",onClick:()=>x({to:"/s/$testId",params:{testId:c}}),className:"-ml-2 h-8",size:"sm",children:[e.jsx(b,{className:"mr-2 h-4 w-4"}),"Back"]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6",children:[e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(O,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-foreground mb-1",children:"Participant Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Name: "}),e.jsx("span",{className:"text-foreground",children:((o=r.participant)==null?void 0:o.name)||"Anonymous"})]}),((h=r.participant)==null?void 0:h.email)&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Email: "}),e.jsx("span",{className:"text-foreground",children:r.participant.email})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"ID: "}),e.jsx("span",{className:"text-foreground font-mono text-xs",children:((p=(j=r.participant)==null?void 0:j.id)==null?void 0:p.slice(-8))||"N/A"})]})]})]})]})}),e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-foreground mb-1",children:"Test Information"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Title: "}),e.jsx("span",{className:"text-foreground",children:(N=r.test)==null?void 0:N.title})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Type: "}),e.jsx("span",{className:"text-foreground capitalize",children:(u=r.test)==null?void 0:u.type})]}),((f=r.test)==null?void 0:f.heldAt)&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(m,{className:"w-3 h-3 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Held: "}),e.jsx("span",{className:"text-foreground",children:r.test.heldAt})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Organization: "}),e.jsx("span",{className:"text-foreground",children:(g=r.organization)==null?void 0:g.name})]})]})]})]})})]}),e.jsxs("div",{className:"rounded-lg border p-6 mb-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:"Results"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Test completed"})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-semibold text-foreground",children:[r.percentage,"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Score"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-semibold text-foreground",children:r.sectionsCount}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Sections"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-semibold text-foreground",children:i(T)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total time"})]})]}),e.jsx("div",{className:"space-y-2",children:e.jsx(w,{value:r.percentage,className:"h-2"})})]}),e.jsx("div",{className:"rounded",children:r.sections.length===1?r.sections.map(t=>e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"space-y-3",children:t.questions.map((s,d)=>e.jsx("div",{className:"border rounded p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:s.isCorrect?e.jsx(y,{className:"w-4 h-4 text-foreground"}):e.jsx(C,{className:"w-4 h-4 text-foreground"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"font-medium text-foreground",children:["Q",d+1]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:s.type.replace("-"," ")}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.pointValue,"pts"]})]}),e.jsx("div",{className:"text-sm text-foreground mb-3",dangerouslySetInnerHTML:{__html:s.question}}),s.myAnswer&&e.jsxs("div",{className:"text-sm mb-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Your answer: "}),e.jsxs("span",{className:"text-foreground",children:[s.myAnswer.answerText&&s.myAnswer.answerText,s.myAnswer.answerOptions&&s.options&&s.options.filter(a=>s.myAnswer.answerOptions.includes(a.id)).map(a=>a.text).join(", ")]})]}),!s.isCorrect&&s.options&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Correct: "}),e.jsx("span",{className:"text-foreground",children:s.options.filter(a=>a.isCorrect).map(a=>a.text).join(", ")})]})]})]})},s.questionId))})},t.sectionId)):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center gap-2 mb-4",children:e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Section Results"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:r.sections.map((t,s)=>e.jsx(l,{className:"p-4 cursor-pointer hover:shadow-md transition-all duration-200 border-2",onClick:()=>I(n===t.sectionId?null:t.sectionId),children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-foreground text-base",children:t.sectionTitle}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Section ",s+1]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-foreground",children:[t.percentage,"%"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.score,"/",t.maxScore]})]})]}),e.jsx(w,{value:t.percentage,className:"h-2"}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(A,{className:"w-3 h-3"}),e.jsx("span",{children:i(t.duration)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(m,{className:"w-3 h-3"}),e.jsx("span",{children:new Date(t.completedAt).toLocaleDateString()})]})]}),e.jsx("div",{className:"text-center pt-2 border-t",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:n===t.sectionId?"Click to collapse":"Click to view questions"})})]})},t.sectionId))}),n&&r.sections.filter(t=>t.sectionId===n).map(t=>e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:t.sectionTitle}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{children:i(t.duration)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(m,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(t.completedAt).toLocaleDateString()})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-foreground",children:[t.score,"/",t.maxScore]}),e.jsxs("div",{className:"text-lg font-medium text-muted-foreground",children:[t.percentage,"%"]})]})]}),e.jsx("div",{className:"space-y-3",children:t.questions.map((s,d)=>e.jsx("div",{className:`border-2 rounded-lg p-4 ${s.isCorrect?"border-green-200 bg-green-50/50":"border-red-200 bg-red-50/50"}`,children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:s.isCorrect?e.jsx(y,{className:"w-5 h-5 text-green-600"}):e.jsx(C,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("span",{className:"font-semibold text-foreground",children:["Q",d+1]}),e.jsx("span",{className:"text-sm text-muted-foreground bg-background px-2 py-1 rounded",children:s.type.replace("-"," ")}),e.jsxs("span",{className:"text-sm font-medium text-foreground bg-background px-2 py-1 rounded",children:[s.pointValue," pts"]})]}),e.jsx("div",{className:"text-sm text-foreground mb-3 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:s.question}}),s.myAnswer&&e.jsx("div",{className:"bg-background rounded-lg p-3 mb-2",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium text-muted-foreground",children:"Your answer: "}),e.jsxs("span",{className:"text-foreground",children:[s.myAnswer.answerText&&s.myAnswer.answerText,s.myAnswer.answerOptions&&s.options&&s.options.filter(a=>s.myAnswer.answerOptions.includes(a.id)).map(a=>a.text).join(", ")]})]})}),!s.isCorrect&&s.options&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium text-green-800",children:"Correct answer: "}),e.jsx("span",{className:"text-green-900",children:s.options.filter(a=>a.isCorrect).map(a=>a.text).join(", ")})]})})]})]})},s.questionId))})]})},t.sectionId))]})})]})})}export{Y as component};
