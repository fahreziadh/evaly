import u from'../../../lib/db';import {question}from'../../../lib/db/schema';import {sql,and,ne,gte,eq}from'drizzle-orm';async function g(i){return await u.transaction(async n=>{const o=[];for(const t of i){const r=(await n.insert(question).values({...t}).returning()).at(0);if(!r)throw new Error("Failed to create question");const s=r.id;await n.update(question).set({order:sql`${question.order}+1`}).where(and(ne(question.id,s),gte(question.order,t.order||1),eq(question.referenceId,t.referenceId))),o.push(r);}return o})}export{g as createQuestion};//# sourceMappingURL=create-question.js.map
//# sourceMappingURL=create-question.js.map