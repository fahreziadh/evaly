import{d as Re,r as ee,f as Le,g as se,j as r,B as X,k as F,t as nt,C as rt,R as i,b as Ot,i as kt,h as $t}from"./main-DlyImwyW.js";import{B as ke}from"./badge-DCUqPuCj.js";import{q as Se,R as At,a as Mt}from"./question-type-CSMItde-.js";import{D as Pt,a as _t,b as It,c as Lt,d as zt,e as Ht,f as Bt,T as qt,h as Ft,i as Ut,C as Wt,R as Vt,j as Qt,P as Yt,O as Xt}from"./dialog-BkomBEYl.js";import{T as Gt}from"./trash-2-kkRBDm4f.js";import{C as Kt}from"./check-Co2yzWpo.js";import{L as Jt}from"./label-xUnlE6-3.js";import{T as Zt,a as en,b as Ge,c as xe}from"./tabs-BbPEs7QD.js";import{P as at}from"./plus-wxcAVWYv.js";import{P as tn}from"./details-VFjzkUHf.js";import{L as nn}from"./lock-B3FKnUJT.js";import{S as me}from"./skeleton-7NpEHvm1.js";import"./proxy-dXJD4cHT.js";import"./editor-CM68Cbou.js";import"./index-cFAMEy_e.js";import"./index-D8u25tJ8.js";import"./Combination-CBwBOCap.js";import"./index-D1zo_IBC.js";import"./index-CC5cL3zt.js";import"./input-CpcA49vi.js";import"./chevron-down-C834hheA.js";import"./file-text-BOTRp_Gg.js";import"./clock-CcSH04sM.js";import"./calendar-Bcye-9vl.js";import"./x-DetwzAZJ.js";import"./index-CDpRp4ge.js";import"./text-shimmer-CdH4dyHN.js";import"./textarea-OnLNa8_E.js";import"./arrow-right-C4R9NL61.js";import"./dialog-delete-test-CmEaVefE.js";import"./separator-BZtZAkNe.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],an=Re("arrow-down",rn);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],sn=Re("arrow-up",on);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],un=Re("sparkles",ln);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=[["path",{d:"M12.034 12.681a.498.498 0 0 1 .647-.647l9 3.5a.5.5 0 0 1-.033.943l-3.444 1.068a1 1 0 0 0-.66.66l-1.067 3.443a.5.5 0 0 1-.943.033z",key:"xwnzip"}],["path",{d:"M5 3a2 2 0 0 0-2 2",key:"y57alp"}],["path",{d:"M19 3a2 2 0 0 1 2 2",key:"18rm91"}],["path",{d:"M5 21a2 2 0 0 1-2-2",key:"sbafld"}],["path",{d:"M9 3h1",key:"1yesri"}],["path",{d:"M9 21h2",key:"1qve2z"}],["path",{d:"M14 3h1",key:"1ec4yj"}],["path",{d:"M3 9v1",key:"1r0deq"}],["path",{d:"M21 9v2",key:"p14lih"}],["path",{d:"M3 14v1",key:"vnatye"}]],dn=Re("square-dashed-mouse-pointer",cn),fn=({className:e,disabled:n=!1,questionId:t,onSuccess:s})=>{const[a,o]=ee.useState(!1),h=Le(se.organizer.question.deleteById),c=async()=>{nt.promise(h({id:t}),{loading:"Deleting question...",success:"Question deleted successfully",error:"Failed to delete question"}),s(),o(!1)};return r.jsxs(Pt,{open:a,onOpenChange:o,children:[r.jsx(_t,{asChild:!0,children:r.jsx(X,{disabled:n,size:"icon-xs",variant:"secondary",className:F("text-muted-foreground",e),onClick:d=>{d.stopPropagation(),d.preventDefault(),o(!0)},children:r.jsx(Gt,{})})}),r.jsxs(It,{onClick:d=>{d.preventDefault(),d.stopPropagation()},children:[r.jsxs(Lt,{children:[r.jsx(zt,{children:"Delete Question"}),r.jsx(Ht,{children:"Are you sure you want to delete this question?"})]}),r.jsxs(Bt,{children:[r.jsx(X,{variant:"secondary",onClick:d=>{d.stopPropagation(),o(!1)},children:"Back"}),r.jsx(X,{variant:"destructive",onClick:d=>{d.stopPropagation(),c()},children:"Delete"})]})]})]})},mn=({className:e,hideOptions:n=!1,data:t,onClickEdit:s,onMoveUp:a,onMoveDown:o,onDeleteSuccess:h,previousQuestionId:c,nextQuestionId:d,previewOnly:x})=>{var u;const f=t!=null&&t.type&&Se[t.type]?Se[t.type]:Se["multiple-choice"];return t?r.jsxs(rt,{className:F(" group p-4",e),onClick:s,children:[r.jsxs("div",{className:"flex flex-row justify-between items-center",children:[r.jsxs("div",{className:"flex flex-row gap-4",children:[r.jsx(ke,{variant:"secondary",children:`Question ${t.order}`}),t.pointValue?r.jsx(ke,{variant:"secondary",children:`${t.pointValue} points`}):null,r.jsxs(ke,{variant:"secondary",children:[f.icon&&r.jsx(f.icon,{size:12}),f.label]})]}),x?null:r.jsxs("div",{className:"flex-row h-5 justify-end items-center flex gap-2",children:[r.jsxs(X,{className:"hidden group-hover:flex",size:"xs",variant:"secondary",children:[r.jsx(dn,{className:"size-4"}),"Click to edit"]}),c?r.jsx(X,{onClick:l=>{l.stopPropagation(),l.preventDefault(),a==null||a()},size:"icon-xs",variant:"secondary",children:r.jsx(sn,{className:"text-muted-foreground"})}):null,d?r.jsx(X,{onClick:l=>{l.stopPropagation(),l.preventDefault(),o==null||o()},size:"icon-xs",variant:"secondary",children:r.jsx(an,{className:"text-muted-foreground"})}):null,r.jsx(fn,{questionId:t._id,onSuccess:()=>{h==null||h()}})]})]}),r.jsxs("div",{className:"mt-3",children:[r.jsx("div",{className:"custom-prose max-w-full max-h-[220px] h-max line-clamp-3",dangerouslySetInnerHTML:{__html:!t.question||t.question==="<p></p>"?" <p class='text-muted-foreground italic'>No question content. Click to edit.</p>":t.question}}),n?null:r.jsx("div",{className:"flex flex-col gap-y-1 gap-x-10 mt-2",children:(u=t.options)==null?void 0:u.map((l,R)=>r.jsxs("div",{className:F("flex flex-row flex-wrap items-start gap-2",l.isCorrect?"text-emerald-600 font-medium":"text-muted-foreground"),children:[r.jsx("div",{className:F("prose prose-sm dark:prose-invert prose-neutral max-w-full",l.isCorrect?"text-emerald-600 font-medium":"text-muted-foreground"),dangerouslySetInnerHTML:{__html:`${String.fromCharCode(65+R).toLowerCase()}. ${l.text||"Option "+(R+1)}`}}),l.isCorrect?r.jsx(Kt,{className:"size-4 mt-1"}):null]},l.id||`option-${R}`))})]})]}):null};function pn(e){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",n.appendChild(t),t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}const ot=i.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),ge=()=>{const e=i.useContext(ot);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};pn(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function hn(){const e=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(e)&&/Mobile/.test(e)||/FxiOS/.test(e))}function gn(){return ze(/^Mac/)}function wn(){return ze(/^iPhone/)}function Ke(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function vn(){return ze(/^iPad/)||gn()&&navigator.maxTouchPoints>1}function it(){return wn()||vn()}function ze(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const yn=24,xn=typeof window<"u"?ee.useLayoutEffect:ee.useEffect;function Je(...e){return(...n)=>{for(let t of e)typeof t=="function"&&t(...n)}}const $e=typeof document<"u"&&window.visualViewport;function Ze(e){let n=window.getComputedStyle(e);return/(auto|scroll)/.test(n.overflow+n.overflowX+n.overflowY)}function st(e){for(Ze(e)&&(e=e.parentElement);e&&!Ze(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const bn=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let be=0,Ae;function Tn(e={}){let{isDisabled:n}=e;xn(()=>{if(!n)return be++,be===1&&it()&&(Ae=Dn()),()=>{be--,be===0&&(Ae==null||Ae())}},[n])}function Dn(){let e,n=0,t=u=>{e=st(u.target),!(e===document.documentElement&&e===document.body)&&(n=u.changedTouches[0].pageY)},s=u=>{if(!e||e===document.documentElement||e===document.body){u.preventDefault();return}let l=u.changedTouches[0].pageY,R=e.scrollTop,j=e.scrollHeight-e.clientHeight;j!==0&&((R<=0&&l>n||R>=j&&l<n)&&u.preventDefault(),n=l)},a=u=>{let l=u.target;_e(l)&&l!==document.activeElement&&(u.preventDefault(),l.style.transform="translateY(-2000px)",l.focus(),requestAnimationFrame(()=>{l.style.transform=""}))},o=u=>{let l=u.target;_e(l)&&(l.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{l.style.transform="",$e&&($e.height<window.innerHeight?requestAnimationFrame(()=>{et(l)}):$e.addEventListener("resize",()=>et(l),{once:!0}))}))},h=()=>{window.scrollTo(0,0)},c=window.pageXOffset,d=window.pageYOffset,x=Je(Sn(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let f=Je(pe(document,"touchstart",t,{passive:!1,capture:!0}),pe(document,"touchmove",s,{passive:!1,capture:!0}),pe(document,"touchend",a,{passive:!1,capture:!0}),pe(document,"focus",o,!0),pe(window,"scroll",h));return()=>{x(),f(),window.scrollTo(c,d)}}function Sn(e,n,t){let s=e.style[n];return e.style[n]=t,()=>{e.style[n]=s}}function pe(e,n,t,s){return e.addEventListener(n,t,s),()=>{e.removeEventListener(n,t,s)}}function et(e){let n=document.scrollingElement||document.documentElement;for(;e&&e!==n;){let t=st(e);if(t!==document.documentElement&&t!==document.body&&t!==e){let s=t.getBoundingClientRect().top,a=e.getBoundingClientRect().top,o=e.getBoundingClientRect().bottom;const h=t.getBoundingClientRect().bottom+yn;o>h&&(t.scrollTop+=a-s)}e=t.parentElement}}function _e(e){return e instanceof HTMLInputElement&&!bn.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function Rn(e,n){typeof e=="function"?e(n):e!=null&&(e.current=n)}function jn(...e){return n=>e.forEach(t=>Rn(t,n))}function lt(...e){return ee.useCallback(jn(...e),e)}const ut=new WeakMap;function $(e,n,t=!1){if(!e||!(e instanceof HTMLElement))return;let s={};Object.entries(n).forEach(([a,o])=>{if(a.startsWith("--")){e.style.setProperty(a,o);return}s[a]=e.style[a],e.style[a]=o}),!t&&ut.set(e,s)}function En(e,n){if(!e||!(e instanceof HTMLElement))return;let t=ut.get(e);t&&(e.style[n]=t[n])}const k=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function Te(e,n){if(!e)return null;const t=window.getComputedStyle(e),s=t.transform||t.webkitTransform||t.mozTransform;let a=s.match(/^matrix3d\((.+)\)$/);return a?parseFloat(a[1].split(", ")[k(n)?13:12]):(a=s.match(/^matrix\((.+)\)$/),a?parseFloat(a[1].split(", ")[k(n)?5:4]):null)}function Cn(e){return 8*(Math.log(e+1)-2)}function Me(e,n){if(!e)return()=>{};const t=e.style.cssText;return Object.assign(e.style,n),()=>{e.style.cssText=t}}function Nn(...e){return(...n)=>{for(const t of e)typeof t=="function"&&t(...n)}}const N={DURATION:.5,EASE:[.32,.72,0,1]},ct=.4,On=.25,kn=100,dt=8,De=16,Ie=26,Pe="vaul-dragging";function ft(e){const n=i.useRef(e);return i.useEffect(()=>{n.current=e}),i.useMemo(()=>(...t)=>n.current==null?void 0:n.current.call(n,...t),[])}function $n({defaultProp:e,onChange:n}){const t=i.useState(e),[s]=t,a=i.useRef(s),o=ft(n);return i.useEffect(()=>{a.current!==s&&(o(s),a.current=s)},[s,a,o]),t}function mt({prop:e,defaultProp:n,onChange:t=()=>{}}){const[s,a]=$n({defaultProp:n,onChange:t}),o=e!==void 0,h=o?e:s,c=ft(t),d=i.useCallback(x=>{if(o){const u=typeof x=="function"?x(e):x;u!==e&&c(u)}else a(x)},[o,e,a,c]);return[h,d]}function An({activeSnapPointProp:e,setActiveSnapPointProp:n,snapPoints:t,drawerRef:s,overlayRef:a,fadeFromIndex:o,onSnapPointChange:h,direction:c="bottom",container:d,snapToSequentialPoint:x}){const[f,u]=mt({prop:e,defaultProp:t==null?void 0:t[0],onChange:n}),[l,R]=i.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);i.useEffect(()=>{function g(){R({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]);const j=i.useMemo(()=>f===(t==null?void 0:t[t.length-1])||null,[t,f]),C=i.useMemo(()=>{var g;return(g=t==null?void 0:t.findIndex(D=>D===f))!=null?g:null},[t,f]),B=t&&t.length>0&&(o||o===0)&&!Number.isNaN(o)&&t[o]===f||!t,y=i.useMemo(()=>{const g=d?{width:d.getBoundingClientRect().width,height:d.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var D;return(D=t==null?void 0:t.map(T=>{const I=typeof T=="string";let P=0;if(I&&(P=parseInt(T,10)),k(c)){const p=I?P:l?T*g.height:0;return l?c==="bottom"?g.height-p:-g.height+p:p}const U=I?P:l?T*g.width:0;return l?c==="right"?g.width-U:-g.width+U:U}))!=null?D:[]},[t,l,d]),M=i.useMemo(()=>C!==null?y==null?void 0:y[C]:null,[y,C]),A=i.useCallback(g=>{var D;const T=(D=y==null?void 0:y.findIndex(I=>I===g))!=null?D:null;h(T),$(s.current,{transition:`transform ${N.DURATION}s cubic-bezier(${N.EASE.join(",")})`,transform:k(c)?`translate3d(0, ${g}px, 0)`:`translate3d(${g}px, 0, 0)`}),y&&T!==y.length-1&&o!==void 0&&T!==o&&T<o?$(a.current,{transition:`opacity ${N.DURATION}s cubic-bezier(${N.EASE.join(",")})`,opacity:"0"}):$(a.current,{transition:`opacity ${N.DURATION}s cubic-bezier(${N.EASE.join(",")})`,opacity:"1"}),u(t==null?void 0:t[Math.max(T,0)])},[s.current,t,y,o,a,u]);i.useEffect(()=>{if(f||e){var g;const D=(g=t==null?void 0:t.findIndex(T=>T===e||T===f))!=null?g:-1;y&&D!==-1&&typeof y[D]=="number"&&A(y[D])}},[f,e,t,y,A]);function w({draggedDistance:g,closeDrawer:D,velocity:T,dismissible:I}){if(o===void 0)return;const P=c==="bottom"||c==="right"?(M??0)-g:(M??0)+g,U=C===o-1,p=C===0,q=g>0;if(U&&$(a.current,{transition:`opacity ${N.DURATION}s cubic-bezier(${N.EASE.join(",")})`}),!x&&T>2&&!q){I?D():A(y[0]);return}if(!x&&T>2&&q&&y&&t){A(y[t.length-1]);return}const L=y==null?void 0:y.reduce((_,G)=>typeof _!="number"||typeof G!="number"?_:Math.abs(G-P)<Math.abs(_-P)?G:_),W=k(c)?window.innerHeight:window.innerWidth;if(T>ct&&Math.abs(g)<W*.4){const _=q?1:-1;if(_>0&&j&&t){A(y[t.length-1]);return}if(p&&_<0&&I&&D(),C===null)return;A(y[C+_]);return}A(L)}function Q({draggedDistance:g}){if(M===null)return;const D=c==="bottom"||c==="right"?M-g:M+g;(c==="bottom"||c==="right")&&D<y[y.length-1]||(c==="top"||c==="left")&&D>y[y.length-1]||$(s.current,{transform:k(c)?`translate3d(0, ${D}px, 0)`:`translate3d(${D}px, 0, 0)`})}function ne(g,D){if(!t||typeof C!="number"||!y||o===void 0)return null;const T=C===o-1;if(C>=o&&D)return 0;if(T&&!D)return 1;if(!B&&!T)return null;const P=T?C+1:C-1,U=T?y[P]-y[P-1]:y[P+1]-y[P],p=g/Math.abs(U);return T?1-p:p}return{isLastSnapPoint:j,activeSnapPoint:f,shouldFade:B,getPercentageDragged:ne,setActiveSnapPoint:u,activeSnapPointIndex:C,onRelease:w,onDrag:Q,snapPointsOffset:y}}const Mn=()=>()=>{};function Pn(){const{direction:e,isOpen:n,shouldScaleBackground:t,setBackgroundColorOnScale:s,noBodyStyles:a}=ge(),o=i.useRef(null),h=ee.useMemo(()=>document.body.style.backgroundColor,[]);function c(){return(window.innerWidth-Ie)/window.innerWidth}i.useEffect(()=>{if(n&&t){o.current&&clearTimeout(o.current);const d=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!d)return;Nn(s&&!a?Me(document.body,{background:"black"}):Mn,Me(d,{transformOrigin:k(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${N.DURATION}s`,transitionTimingFunction:`cubic-bezier(${N.EASE.join(",")})`}));const x=Me(d,{borderRadius:`${dt}px`,overflow:"hidden",...k(e)?{transform:`scale(${c()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${c()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{x(),o.current=window.setTimeout(()=>{h?document.body.style.background=h:document.body.style.removeProperty("background")},N.DURATION*1e3)}}},[n,t,h])}let he=null;function _n({isOpen:e,modal:n,nested:t,hasBeenOpened:s,preventScrollRestoration:a,noBodyStyles:o}){const[h,c]=i.useState(()=>typeof window<"u"?window.location.href:""),d=i.useRef(0),x=i.useCallback(()=>{if(Ke()&&he===null&&e&&!o){he={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:u,innerHeight:l}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-d.current}px`,left:`${-u}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const R=l-window.innerHeight;R&&d.current>=l&&(document.body.style.top=`${-(d.current+R)}px`)}),300)}},[e]),f=i.useCallback(()=>{if(Ke()&&he!==null&&!o){const u=-parseInt(document.body.style.top,10),l=-parseInt(document.body.style.left,10);Object.assign(document.body.style,he),window.requestAnimationFrame(()=>{if(a&&h!==window.location.href){c(window.location.href);return}window.scrollTo(l,u)}),he=null}},[h]);return i.useEffect(()=>{function u(){d.current=window.scrollY}return u(),window.addEventListener("scroll",u),()=>{window.removeEventListener("scroll",u)}},[]),i.useEffect(()=>{if(n)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||f()}},[n,f]),i.useEffect(()=>{t||!s||(e?(!window.matchMedia("(display-mode: standalone)").matches&&x(),n||window.setTimeout(()=>{f()},500)):f())},[e,s,h,n,t,x,f]),{restorePositionSetting:f}}function In({open:e,onOpenChange:n,children:t,onDrag:s,onRelease:a,snapPoints:o,shouldScaleBackground:h=!1,setBackgroundColorOnScale:c=!0,closeThreshold:d=On,scrollLockTimeout:x=kn,dismissible:f=!0,handleOnly:u=!1,fadeFromIndex:l=o&&o.length-1,activeSnapPoint:R,setActiveSnapPoint:j,fixed:C,modal:B=!0,onClose:y,nested:M,noBodyStyles:A=!1,direction:w="bottom",defaultOpen:Q=!1,disablePreventScroll:ne=!0,snapToSequentialPoint:g=!1,preventScrollRestoration:D=!1,repositionInputs:T=!0,onAnimationEnd:I,container:P,autoFocus:U=!1}){var p,q;const[L=!1,W]=mt({defaultProp:Q,prop:e,onChange:m=>{n==null||n(m),!m&&!M&&Tt(),setTimeout(()=>{I==null||I(m)},N.DURATION*1e3),m&&!B&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),m||(document.body.style.pointerEvents="auto")}}),[_,G]=i.useState(!1),[K,le]=i.useState(!1),[gt,He]=i.useState(!1),ae=i.useRef(null),we=i.useRef(null),je=i.useRef(null),Ee=i.useRef(null),ue=i.useRef(null),ce=i.useRef(!1),Ce=i.useRef(null),Ne=i.useRef(0),oe=i.useRef(!1),Be=i.useRef(!Q),qe=i.useRef(0),v=i.useRef(null),Fe=i.useRef(((p=v.current)==null?void 0:p.getBoundingClientRect().height)||0),Ue=i.useRef(((q=v.current)==null?void 0:q.getBoundingClientRect().width)||0),Oe=i.useRef(0),wt=i.useCallback(m=>{o&&m===de.length-1&&(we.current=new Date)},[]),{activeSnapPoint:vt,activeSnapPointIndex:ie,setActiveSnapPoint:We,onRelease:yt,snapPointsOffset:de,onDrag:xt,shouldFade:Ve,getPercentageDragged:bt}=An({snapPoints:o,activeSnapPointProp:R,setActiveSnapPointProp:j,drawerRef:v,fadeFromIndex:l,overlayRef:ae,onSnapPointChange:wt,direction:w,container:P,snapToSequentialPoint:g});Tn({isDisabled:!L||K||!B||gt||!_||!T||!ne});const{restorePositionSetting:Tt}=_n({isOpen:L,modal:B,nested:M??!1,hasBeenOpened:_,preventScrollRestoration:D,noBodyStyles:A});function ve(){return(window.innerWidth-Ie)/window.innerWidth}function Dt(m){var S,E;!f&&!o||v.current&&!v.current.contains(m.target)||(Fe.current=((S=v.current)==null?void 0:S.getBoundingClientRect().height)||0,Ue.current=((E=v.current)==null?void 0:E.getBoundingClientRect().width)||0,le(!0),je.current=new Date,it()&&window.addEventListener("touchend",()=>ce.current=!1,{once:!0}),m.target.setPointerCapture(m.pointerId),Ne.current=k(w)?m.pageY:m.pageX)}function Qe(m,S){var E;let b=m;const O=(E=window.getSelection())==null?void 0:E.toString(),H=v.current?Te(v.current,w):null,z=new Date;if(b.tagName==="SELECT"||b.hasAttribute("data-vaul-no-drag")||b.closest("[data-vaul-no-drag]"))return!1;if(w==="right"||w==="left")return!0;if(we.current&&z.getTime()-we.current.getTime()<500)return!1;if(H!==null&&(w==="bottom"?H>0:H<0))return!0;if(O&&O.length>0)return!1;if(ue.current&&z.getTime()-ue.current.getTime()<x&&H===0||S)return ue.current=z,!1;for(;b;){if(b.scrollHeight>b.clientHeight){if(b.scrollTop!==0)return ue.current=new Date,!1;if(b.getAttribute("role")==="dialog")return!0}b=b.parentNode}return!0}function St(m){if(v.current&&K){const S=w==="bottom"||w==="right"?1:-1,E=(Ne.current-(k(w)?m.pageY:m.pageX))*S,b=E>0,O=o&&!f&&!b;if(O&&ie===0)return;const H=Math.abs(E),z=document.querySelector("[data-vaul-drawer-wrapper]"),J=w==="bottom"||w==="top"?Fe.current:Ue.current;let V=H/J;const re=bt(H,b);if(re!==null&&(V=re),O&&V>=1||!ce.current&&!Qe(m.target,b))return;if(v.current.classList.add(Pe),ce.current=!0,$(v.current,{transition:"none"}),$(ae.current,{transition:"none"}),o&&xt({draggedDistance:E}),b&&!o){const Y=Cn(E),ye=Math.min(Y*-1,0)*S;$(v.current,{transform:k(w)?`translate3d(0, ${ye}px, 0)`:`translate3d(${ye}px, 0, 0)`});return}const Z=1-V;if((Ve||l&&ie===l-1)&&(s==null||s(m,V),$(ae.current,{opacity:`${Z}`,transition:"none"},!0)),z&&ae.current&&h){const Y=Math.min(ve()+V*(1-ve()),1),ye=8-V*8,Xe=Math.max(0,14-V*14);$(z,{borderRadius:`${ye}px`,transform:k(w)?`scale(${Y}) translate3d(0, ${Xe}px, 0)`:`scale(${Y}) translate3d(${Xe}px, 0, 0)`,transition:"none"},!0)}if(!o){const Y=H*S;$(v.current,{transform:k(w)?`translate3d(0, ${Y}px, 0)`:`translate3d(${Y}px, 0, 0)`})}}}i.useEffect(()=>{window.requestAnimationFrame(()=>{Be.current=!0})},[]),i.useEffect(()=>{var m;function S(){if(!v.current||!T)return;const E=document.activeElement;if(_e(E)||oe.current){var b;const O=((b=window.visualViewport)==null?void 0:b.height)||0,H=window.innerHeight;let z=H-O;const J=v.current.getBoundingClientRect().height||0,V=J>H*.8;Oe.current||(Oe.current=J);const re=v.current.getBoundingClientRect().top;if(Math.abs(qe.current-z)>60&&(oe.current=!oe.current),o&&o.length>0&&de&&ie){const Z=de[ie]||0;z+=Z}if(qe.current=z,J>O||oe.current){const Z=v.current.getBoundingClientRect().height;let Y=Z;Z>O&&(Y=O-(V?re:Ie)),C?v.current.style.height=`${Z-Math.max(z,0)}px`:v.current.style.height=`${Math.max(Y,O-re)}px`}else hn()||(v.current.style.height=`${Oe.current}px`);o&&o.length>0&&!oe.current?v.current.style.bottom="0px":v.current.style.bottom=`${Math.max(z,0)}px`}}return(m=window.visualViewport)==null||m.addEventListener("resize",S),()=>{var E;return(E=window.visualViewport)==null?void 0:E.removeEventListener("resize",S)}},[ie,o,de]);function fe(m){Rt(),y==null||y(),m||W(!1),setTimeout(()=>{o&&We(o[0])},N.DURATION*1e3)}function Ye(){if(!v.current)return;const m=document.querySelector("[data-vaul-drawer-wrapper]"),S=Te(v.current,w);$(v.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${N.DURATION}s cubic-bezier(${N.EASE.join(",")})`}),$(ae.current,{transition:`opacity ${N.DURATION}s cubic-bezier(${N.EASE.join(",")})`,opacity:"1"}),h&&S&&S>0&&L&&$(m,{borderRadius:`${dt}px`,overflow:"hidden",...k(w)?{transform:`scale(${ve()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${ve()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${N.DURATION}s`,transitionTimingFunction:`cubic-bezier(${N.EASE.join(",")})`},!0)}function Rt(){!K||!v.current||(v.current.classList.remove(Pe),ce.current=!1,le(!1),Ee.current=new Date)}function jt(m){if(!K||!v.current)return;v.current.classList.remove(Pe),ce.current=!1,le(!1),Ee.current=new Date;const S=Te(v.current,w);if(!m||!Qe(m.target,!1)||!S||Number.isNaN(S)||je.current===null)return;const E=Ee.current.getTime()-je.current.getTime(),b=Ne.current-(k(w)?m.pageY:m.pageX),O=Math.abs(b)/E;if(O>.05&&(He(!0),setTimeout(()=>{He(!1)},200)),o){yt({draggedDistance:b*(w==="bottom"||w==="right"?1:-1),closeDrawer:fe,velocity:O,dismissible:f}),a==null||a(m,!0);return}if(w==="bottom"||w==="right"?b>0:b<0){Ye(),a==null||a(m,!0);return}if(O>ct){fe(),a==null||a(m,!1);return}var H;const z=Math.min((H=v.current.getBoundingClientRect().height)!=null?H:0,window.innerHeight);var J;const V=Math.min((J=v.current.getBoundingClientRect().width)!=null?J:0,window.innerWidth),re=w==="left"||w==="right";if(Math.abs(S)>=(re?V:z)*d){fe(),a==null||a(m,!1);return}a==null||a(m,!0),Ye()}i.useEffect(()=>(L&&($(document.documentElement,{scrollBehavior:"auto"}),we.current=new Date),()=>{En(document.documentElement,"scrollBehavior")}),[L]);function Et(m){const S=m?(window.innerWidth-De)/window.innerWidth:1,E=m?-16:0;Ce.current&&window.clearTimeout(Ce.current),$(v.current,{transition:`transform ${N.DURATION}s cubic-bezier(${N.EASE.join(",")})`,transform:k(w)?`scale(${S}) translate3d(0, ${E}px, 0)`:`scale(${S}) translate3d(${E}px, 0, 0)`}),!m&&v.current&&(Ce.current=setTimeout(()=>{const b=Te(v.current,w);$(v.current,{transition:"none",transform:k(w)?`translate3d(0, ${b}px, 0)`:`translate3d(${b}px, 0, 0)`})},500))}function Ct(m,S){if(S<0)return;const E=(window.innerWidth-De)/window.innerWidth,b=E+S*(1-E),O=-16+S*De;$(v.current,{transform:k(w)?`scale(${b}) translate3d(0, ${O}px, 0)`:`scale(${b}) translate3d(${O}px, 0, 0)`,transition:"none"})}function Nt(m,S){const E=k(w)?window.innerHeight:window.innerWidth,b=S?(E-De)/E:1,O=S?-16:0;S&&$(v.current,{transition:`transform ${N.DURATION}s cubic-bezier(${N.EASE.join(",")})`,transform:k(w)?`scale(${b}) translate3d(0, ${O}px, 0)`:`scale(${b}) translate3d(${O}px, 0, 0)`})}return i.useEffect(()=>{B||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[B]),i.createElement(Vt,{defaultOpen:Q,onOpenChange:m=>{!f&&!m||(m?G(!0):fe(!0),W(m))},open:L},i.createElement(ot.Provider,{value:{activeSnapPoint:vt,snapPoints:o,setActiveSnapPoint:We,drawerRef:v,overlayRef:ae,onOpenChange:n,onPress:Dt,onRelease:jt,onDrag:St,dismissible:f,shouldAnimate:Be,handleOnly:u,isOpen:L,isDragging:K,shouldFade:Ve,closeDrawer:fe,onNestedDrag:Ct,onNestedOpenChange:Et,onNestedRelease:Nt,keyboardIsOpen:oe,modal:B,snapPointsOffset:de,activeSnapPointIndex:ie,direction:w,shouldScaleBackground:h,setBackgroundColorOnScale:c,noBodyStyles:A,container:P,autoFocus:U}},t))}const pt=i.forwardRef(function({...e},n){const{overlayRef:t,snapPoints:s,onRelease:a,shouldFade:o,isOpen:h,modal:c,shouldAnimate:d}=ge(),x=lt(n,t),f=s&&s.length>0;if(!c)return null;const u=i.useCallback(l=>a(l),[a]);return i.createElement(Xt,{onMouseUp:u,ref:x,"data-vaul-overlay":"","data-vaul-snap-points":h&&f?"true":"false","data-vaul-snap-points-overlay":h&&o?"true":"false","data-vaul-animate":d!=null&&d.current?"true":"false",...e})});pt.displayName="Drawer.Overlay";const ht=i.forwardRef(function({onPointerDownOutside:e,style:n,onOpenAutoFocus:t,...s},a){const{drawerRef:o,onPress:h,onRelease:c,onDrag:d,keyboardIsOpen:x,snapPointsOffset:f,activeSnapPointIndex:u,modal:l,isOpen:R,direction:j,snapPoints:C,container:B,handleOnly:y,shouldAnimate:M,autoFocus:A}=ge(),[w,Q]=i.useState(!1),ne=lt(a,o),g=i.useRef(null),D=i.useRef(null),T=i.useRef(!1),I=C&&C.length>0;Pn();const P=(p,q,L=0)=>{if(T.current)return!0;const W=Math.abs(p.y),_=Math.abs(p.x),G=_>W,K=["bottom","right"].includes(q)?1:-1;if(q==="left"||q==="right"){if(!(p.x*K<0)&&_>=0&&_<=L)return G}else if(!(p.y*K<0)&&W>=0&&W<=L)return!G;return T.current=!0,!0};i.useEffect(()=>{I&&window.requestAnimationFrame(()=>{Q(!0)})},[]);function U(p){g.current=null,T.current=!1,c(p)}return i.createElement(Qt,{"data-vaul-drawer-direction":j,"data-vaul-drawer":"","data-vaul-delayed-snap-points":w?"true":"false","data-vaul-snap-points":R&&I?"true":"false","data-vaul-custom-container":B?"true":"false","data-vaul-animate":M!=null&&M.current?"true":"false",...s,ref:ne,style:f&&f.length>0?{"--snap-point-height":`${f[u??0]}px`,...n}:n,onPointerDown:p=>{y||(s.onPointerDown==null||s.onPointerDown.call(s,p),g.current={x:p.pageX,y:p.pageY},h(p))},onOpenAutoFocus:p=>{t==null||t(p),A||p.preventDefault()},onPointerDownOutside:p=>{if(e==null||e(p),!l||p.defaultPrevented){p.preventDefault();return}x.current&&(x.current=!1)},onFocusOutside:p=>{if(!l){p.preventDefault();return}},onPointerMove:p=>{if(D.current=p,y||(s.onPointerMove==null||s.onPointerMove.call(s,p),!g.current))return;const q=p.pageY-g.current.y,L=p.pageX-g.current.x,W=p.pointerType==="touch"?10:2;P({x:L,y:q},j,W)?d(p):(Math.abs(L)>W||Math.abs(q)>W)&&(g.current=null)},onPointerUp:p=>{s.onPointerUp==null||s.onPointerUp.call(s,p),g.current=null,T.current=!1,c(p)},onPointerOut:p=>{s.onPointerOut==null||s.onPointerOut.call(s,p),U(D.current)},onContextMenu:p=>{s.onContextMenu==null||s.onContextMenu.call(s,p),D.current&&U(D.current)}})});ht.displayName="Drawer.Content";const Ln=250,zn=120,Hn=i.forwardRef(function({preventCycle:e=!1,children:n,...t},s){const{closeDrawer:a,isDragging:o,snapPoints:h,activeSnapPoint:c,setActiveSnapPoint:d,dismissible:x,handleOnly:f,isOpen:u,onPress:l,onDrag:R}=ge(),j=i.useRef(null),C=i.useRef(!1);function B(){if(C.current){A();return}window.setTimeout(()=>{y()},zn)}function y(){if(o||e||C.current){A();return}if(A(),!h||h.length===0){x||a();return}if(c===h[h.length-1]&&x){a();return}const Q=h.findIndex(g=>g===c);if(Q===-1)return;const ne=h[Q+1];d(ne)}function M(){j.current=window.setTimeout(()=>{C.current=!0},Ln)}function A(){j.current&&window.clearTimeout(j.current),C.current=!1}return i.createElement("div",{onClick:B,onPointerCancel:A,onPointerDown:w=>{f&&l(w),M()},onPointerMove:w=>{f&&R(w)},ref:s,"data-vaul-drawer-visible":u?"true":"false","data-vaul-handle":"","aria-hidden":"true",...t},i.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},n))});Hn.displayName="Drawer.Handle";function Bn(e){const n=ge(),{container:t=n.container,...s}=e;return i.createElement(Yt,{container:t,...s})}const te={Root:In,Content:ht,Overlay:pt,Trigger:qt,Portal:Bn,Close:Wt,Title:Ft,Description:Ut};function qn({...e}){return r.jsx(te.Root,{"data-slot":"drawer",...e})}function Fn({...e}){return r.jsx(te.Trigger,{"data-slot":"drawer-trigger",...e})}function Un({...e}){return r.jsx(te.Portal,{"data-slot":"drawer-portal",...e})}function Wn({...e}){return r.jsx(te.Close,{"data-slot":"drawer-close",...e})}function Vn({className:e,...n}){return r.jsx(te.Overlay,{"data-slot":"drawer-overlay",className:F("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/20",e),...n})}function Qn({className:e,children:n,...t}){return r.jsxs(Un,{"data-slot":"drawer-portal",children:[r.jsx(Vn,{}),r.jsx(te.Content,{"data-slot":"drawer-content",className:F("group/drawer-content bg-background fixed z-50 flex h-auto flex-col","data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0","data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:rounded-t-lg","data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:sm:max-w-sm","data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:sm:max-w-sm",e),...t,children:n})]})}function Yn({className:e,...n}){return r.jsx("div",{"data-slot":"drawer-header",className:F("flex flex-col gap-1.5 p-4",e),...n})}function Xn({className:e,...n}){return r.jsx("div",{"data-slot":"drawer-footer",className:F("mt-auto flex flex-col gap-2 p-4",e),...n})}function Gn({className:e,...n}){return r.jsx(te.Title,{"data-slot":"drawer-title",className:F("text-foreground font-semibold",e),...n})}function Kn({className:e,...n}){return r.jsx(te.Description,{"data-slot":"drawer-description",className:F("text-muted-foreground",e),...n})}const tt=({order:e=1,referenceId:n,triggerButton:t,showTabsOption:s=!0,onSuccessCreateQuestion:a})=>{const[o,h]=ee.useState(),[c,d]=ee.useState(!1),x=Le(se.organizer.question.createInitialQuestions),f=async l=>{e&&(h(l),x({referenceId:n,type:l,order:e}).then(R=>{R&&(a==null||a(R))}).finally(()=>{h(void 0),d(!1)}))},u=ee.useMemo(()=>Object.values(Se).reduce((l,R)=>{const j=R.group||"Other";return l[j]||(l[j]=[]),l[j].push(R),l},{}),[]);return r.jsxs(qn,{open:c,onOpenChange:d,children:[r.jsx(Fn,{asChild:!0,children:t||r.jsxs(X,{variant:"outline",type:"button",className:"w-max",children:[r.jsx(at,{})," Add question"]})}),r.jsxs(Qn,{className:"sm:max-w-none h-dvh flex flex-col p-0",children:[r.jsxs("div",{className:"container max-w-2xl overflow-y-auto pt-[10vh] pb-20",children:[r.jsxs(Yn,{className:"p-0",children:[r.jsx(Gn,{children:"Add Question"}),r.jsx(Kn,{children:"Select a type of question to add"})]}),r.jsxs(Zt,{defaultValue:"manual",className:"mt-4 space-y-6",children:[s?r.jsxs(en,{className:"divide-x gap-0 divide-dashed divide-foreground/5",children:[r.jsxs(Ge,{value:"manual",children:[r.jsx(tn,{className:"size-4"})," Manual"]}),r.jsxs(Ge,{value:"ai",children:[r.jsx(un,{className:"size-4"})," Generate with AI"]})]}):null,r.jsx(xe,{value:"manual",children:r.jsx("div",{className:"space-y-6",children:Object.entries(u).map(([l,R])=>r.jsxs("div",{className:"",children:[r.jsx(Jt,{className:"capitalize",children:l}),r.jsx("div",{className:"flex flex-wrap gap-3 w-full mt-2",children:R.map(j=>r.jsxs(X,{variant:"outline",className:"group justify-start",disabled:j.isHidden||o===j.value,onClick:()=>f(j.value),children:[j.isHidden?r.jsx(nn,{className:"size-3.5"}):j.value===o?r.jsx(Ot,{className:"animate-spin"}):r.jsx(j.icon,{className:"size-4"}),j.label]},j.value))})]},l))})}),r.jsx(xe,{value:"import"}),r.jsx(xe,{value:"template"}),r.jsx(xe,{value:"ai"})]})]}),r.jsx("div",{className:"fixed bottom-0 left-0 right-0 border-t border-dashed bg-background",children:r.jsx(Xn,{className:"sm:justify-start mt-0 py-4 container max-w-2xl",children:r.jsx(Wn,{asChild:!0,children:r.jsx(X,{variant:"outline",className:"w-max",children:"Back"})})})})]})]})},Nr=({selectedSectionId:e,testId:n})=>{const t=kt(),s=Le(se.organizer.question.changeOrder).withOptimisticUpdate((c,d)=>{const x=c.getQuery(se.organizer.question.getAllByReferenceId,{referenceId:e});if(x){const f=x;for(const u of d.questionIds){const l=f.findIndex(R=>R._id===u.questionId);l!==-1&&(f[l].order=u.order)}c.setQuery(se.organizer.question.getAllByReferenceId,{referenceId:e},f.sort((u,l)=>u.order-l.order))}}),a=$t(se.organizer.question.getAllByReferenceId,{referenceId:e}),o=c=>{s({questionIds:c})},h=c=>{t({to:"/app/questions/details",search:{questionId:c,selectedSectionId:e,testId:n}})};return a===void 0?r.jsxs("div",{className:"flex flex-col gap-8",children:[r.jsx(me,{className:"h-44 w-full "}),r.jsx(me,{className:"h-44 w-full "}),r.jsx(me,{className:"h-44 w-full "}),r.jsx(me,{className:"h-44 w-full "}),r.jsx(me,{className:"h-44 w-full "})]}):a.length?r.jsx(At,{onReorder:()=>{},values:a,as:"div",className:F("w-full"),children:a.map((c,d)=>{var x,f;return r.jsxs(Mt,{value:c,as:"div","data-index":d,dragListener:!1,children:[r.jsx(mn,{onClickEdit:()=>{h(c._id)},data:c,previousQuestionId:(x=a[d-1])==null?void 0:x._id,nextQuestionId:(f=a[d+1])==null?void 0:f._id,onMoveUp:()=>{const u=a[d-1];u&&o([{questionId:u._id,order:u.order+1},{questionId:c._id,order:u.order}])},onMoveDown:()=>{const u=a[d+1];u&&o([{questionId:u._id,order:u.order-1},{questionId:c._id,order:u.order}])}}),r.jsxs("div",{className:F("h-8 flex items-center justify-center relative group/separator",d===a.length-1?"mb-4":""),children:[r.jsx(tt,{testId:n,referenceId:e,order:c.order+1,triggerButton:r.jsxs(X,{size:"xxs",variant:"outline",className:F("absolute opacity-50 lg:opacity-0 lg:group-hover/separator:opacity-100",d===a.length-1?"lg:opacity-100":""),children:[r.jsx(at,{})," Add Question"]}),onSuccessCreateQuestion:u=>{h(u)}}),r.jsx("div",{className:"h-auto border-b border-border border-dashed w-full group-hover/separator:border-foreground/20"})]})]},c._id)})}):r.jsxs(rt,{className:"flex flex-col p-6 gap-4",children:[r.jsx("h1",{children:"No question found"}),r.jsx(tt,{testId:n,referenceId:e,order:((a==null?void 0:a.length)||0)+1,onSuccessCreateQuestion:c=>{nt.success("Questions added successfully"),h(c)}})]})};export{Nr as default};
